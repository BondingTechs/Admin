import{i as e,d as t}from"./index-bb4a3b00.js";import"./vue-echarts-f79e68f9.js";import"./element-plus-ad41b746.js";import{u as o}from"./index-6742aea9.js";import{_ as r}from"./menu-check.vue_vue_type_style_index_0_lang-c0f3b555.js";import{_ as l}from"./icon.vue_vue_type_style_index_0_lang-91823d94.js";import{d as a,R as p,o as i,I as s,J as n,b as d,N as m,M as c}from"./@vue.runtime-core-e50a2272.js";import"./@vue.runtime-dom-90e9fdb1.js";import"./@vue.shared-5670d8a7.js";import"./@vue.reactivity-da630c06.js";import"./store-96e17a43.js";import"./axios-966d6f38.js";import"./nprogress-6d1393d1.js";import"./lodash-es-a085e596.js";import"./vue-router-916993ce.js";import"./pinia-bb8d2f73.js";import"./vue-demi-5b9a0fa5.js";import"./@vueuse.core-2fa6d9e6.js";import"./@vueuse.shared-ca6b0f06.js";import"./vue-b5fce9d1.js";import"./mockjs-93ca2bc8.js";import"./mitt-dab1f1cb.js";import"./@element-plus.icons-vue-26cbeb7a.js";import"./@popperjs.core-040feab9.js";import"./@ctrl.tinycolor-84ad98d6.js";import"./dayjs-dd470533.js";import"./async-validator-efc2d198.js";import"./memoize-one-99e54574.js";import"./escape-html-4bbaf1e1.js";import"./normalize-wheel-es-da779ce4.js";import"./@floating-ui.dom-9d85c32a.js";import"./@floating-ui.core-c56fb7e8.js";import"./resize-detector-94afada7.js";import"./echarts-6943293a.js";import"./tslib-ed971494.js";import"./zrender-0d232395.js";const u=a({name:"industry-category"}),b=a({...u,setup(a){const{service:u}=o(),b=e.exports.useUpsert({dialog:{width:"800px"},items:[{label:"分類名稱",prop:"name",required:!0,component:{name:"el-input"}},{label:"分類代稱",prop:"slug",required:!0,component:{name:"el-input"}},{label:"分類描述",prop:"description",component:{name:"el-input",props:{type:"textarea",rows:4,placeholder:" "}}},{label:"上級分類",prop:"parentId",component:{vm:r,props:{showChild:!1,multiple:!1}}},{prop:"icon",label:"分類Icon",span:24,hidden:({scope:e})=>2==e.type,component:{vm:l}},{label:"排序號",prop:"orderNum",component:{name:"el-input-number",props:{min:0}}}],onOpen(e){e.deleteTime&&(e.isDelete=!0)}}),f=e.exports.useTable({contextMenu:[e=>({label:"新增",hidden:e.parentId,callback(t){v(e),t()}}),"update","delete",e=>({label:"權限",hidden:1!=e.type,callback(t){!function({id:e}){var t;null==(t=j.value)||t.rowAppend({parentId:e,type:2})}(e),t()}})],columns:[{prop:"icon",label:"圖標",width:80},{prop:"name",label:"名稱",align:"left",width:250},{prop:"slug",label:"代稱",align:"left",minWidth:250},{label:"新聞數量",prop:"articleCount",width:120},{label:"小知識數量",prop:"tipCount",width:120},{prop:"orderNum",label:"排序號",sortable:"asc",width:100},{prop:"updateTime",label:"更新時間",width:160},{label:"操作",type:"op",width:250,buttons:["slot-add","edit","delete"]}]}),j=e.exports.useCrud({service:u.industry.category,onRefresh(e,{render:o}){u.industry.category.list().then((e=>{o(t(e.map((e=>(e.isDelete=Boolean(e.deleteTime),e)))))}))}},(e=>{e.refresh()}));function h(e,t){var o;(null==t?void 0:t.property)&&e.children&&(null==(o=f.value)||o.toggleRowExpansion(e))}function v({id:e}){var t;null==(t=j.value)||t.rowAppend({parentId:e,keepAlive:!0,isShow:!0})}return(e,t)=>{const o=p("cl-refresh-btn"),r=p("cl-add-btn"),l=p("cl-multi-delete-btn"),a=p("cl-flex1"),u=p("cl-search-key"),y=p("el-row"),_=p("icon-svg"),w=p("el-button"),g=p("cl-table"),x=p("cl-pagination"),k=p("cl-upsert"),C=p("cl-crud");return i(),s(C,{ref_key:"Crud",ref:j},{default:n((()=>[d(y,null,{default:n((()=>[d(o),d(r),d(l),d(a),d(u)])),_:1}),d(y,null,{default:n((()=>[d(g,{ref_key:"Table",ref:f,"row-key":"id","default-expand-all":!0,onRowClick:h},{"column-icon":n((({scope:e})=>[d(_,{name:e.row.icon,size:"16px",style:{"margin-top":"5px"}},null,8,["name"])])),"slot-add":n((({scope:e})=>[e.row.parentId?c("",!0):(i(),s(w,{key:0,plain:"",type:"success",onClick:t=>v(e.row)},{default:n((()=>[m("新增")])),_:2},1032,["onClick"]))])),_:1},512)])),_:1}),d(y,null,{default:n((()=>[d(a),d(x)])),_:1}),d(k,{ref_key:"Upsert",ref:b},null,512)])),_:1},512)}}});export{b as default};
